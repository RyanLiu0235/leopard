!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.leopard=n()}(this,function(){"use strict";var e=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},n=function(e){return e.replace(/"/g,'\\"')};return function(t,r){var i=function(e,t){t=t||{};var r=/<%(.+?)%>/g,i=null,u=null,s="var lines = [];\nvar rst;\nwith("+JSON.stringify(t)+") {\n";function a(e){s+="lines.push("+e+");\n"}for(var c=function(e){if(e.length>0)switch(e.charAt(0)){case"=":a("escape("+e.substr(1).trim()+")");break;case"-":a(e.substr(1).trim());break;default:s+=e+"\n"}};i=r.exec(e);){var l=e.substring(null!==u?u.index+u[0].length:0,i.index);l&&a('"'+n(l)+'"');var o=i[1].trim();o&&c(o),u=i}var f=e.substr(u.index+u[0].length);return f&&a('"'+n(f)+'"'),s+='rst = lines.join("");\n}\nreturn rst;'}(t,r);return new Function("escape",i).call(this,e)}});
