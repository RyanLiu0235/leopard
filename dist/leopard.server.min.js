"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var fs=_interopDefault(require("fs")),escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},utils={escape:escape},escape$1=utils.escape;function escapeQuotes(e){return e.replace(/"/g,'\\"')}function Leopard(){}var p=Leopard.prototype;function parseFilters(e){return e.split("|").reduce((e,r)=>r.trim()+"("+e.trim()+")")}p.parse=function(e,r){r=r||{};var t="var lines = [];\nvar rst;\nwith("+JSON.stringify(r)+") {\n";function i(e){t+="lines.push("+e+");\n"}function n(e){var r=e.charAt(0);if(["=","-"].indexOf(r)>-1){var n=e.substr(1).trim();if(""===n)return;i("="===r?"escape("+parseFilters(n)+")":parseFilters(n))}else t+=e+"\n"}var s=/\S/;function a(e){return s.test(e)}for(var l,p=e.split("\n"),o=/<%(.+?)%>/g,c=/\s*$/,u=0,f=p.length;u<f;u++){var v=null,d=null,h=u===f-1;if(a(l=p[u].replace(c,"")))if(null!==(v=o.exec(l))){for(;v;){var m=l.substring(null!==d?d.index+d[0].length:0,v.index);a(m)&&i('"'+escapeQuotes(m)+'"');var g=v[1].trim();g&&n(g),d=v,v=o.exec(l)}var F=l.substr(d.index+d[0].length);a(F)&&i('"'+escapeQuotes(F)+(h?'"':'\\n"'))}else i('"'+escapeQuotes(l)+(h?'"':'\\n"'));else t+="\n"}return t+='rst = lines.join("");\n}\nreturn rst;'},p.compile=function(e,r){var t=this.parse(e,r);return new Function("escape",...Object.keys(p),t).call(p,escape$1,...Object.values(p))};var instance=Leopard;function filter(e,r){if("function"!=typeof r)throw new TypeError('Leopard: filter requires a function as handler, but got "'+typeof r+'" in filter "'+e+'"');if(e in this.prototype)throw new Error('Leopard: filter "'+e+'" has been declared');return this.prototype[e]=r,this}var filter_1=filter,capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},reverse=function(e){return e.split("").reverse().join("")},presets={capitalize:capitalize,reverse:reverse};instance.filter=filter_1;for(var name,presetFilters=Object.keys(presets),i=0,l=presetFilters.length;i<l;i++)name=presetFilters[i],instance.filter(name,presets[name]);var index_browser=instance;function _compileFile(e){e.prototype.compileFile=function(e,r,t){var i=this;fs.readFile(e,"utf-8",function(e,n){if(e)t(e);else{var s=i.compile(n,r);t(null,s)}})}}var compileFile=_compileFile;compileFile(index_browser);var index_server=index_browser;module.exports=index_server;
